!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(14),a=n(8);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?a(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var i=n(15);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t,n){var i=n(16),a=n(17),r=n(18);e.exports=function(e,t){return i(e)||a(e,t)||r()}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(i=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";n.r(t);var i=n(11),a=n(2),r=n(9),l=n.n(r),o=n(3),c=n.n(o),u=n(4),s=n.n(u),p=n(5),b=n.n(p),m=n(6),d=n.n(m),f=n(8),h=n.n(f),g=n(7),y=n.n(g),j=n(0),O=n(12),v=n(1),E=n(10),C=n.n(E),k=n(13),x=n.n(k),D=function(e){var t=e.children,n=Object(j.useState)(!1),i=x()(n,2),a=i[0],r=i[1],l=function(){return r(!1)};return[Object(j.createElement)(j.Fragment,null,Object(j.createElement)(v.Button,{isSecondary:!0,onClick:function(){return r(!0)}},t),a&&Object(j.createElement)(v.Modal,{title:"This is my modal",onRequestClose:l},Object(j.createElement)(v.Button,{isSecondary:!0,onClick:l},"My custom close button")))]};function S(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}var w=function(e){function t(){return c()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),s()(t,[{key:"render",value:function(){var e,t,n=this.props,i=n.objectID,a=n.title,r=n.excerpt,l=n.thumbnailURL,o=n.fields,c=n.fieldData,u=n.imageDimensions,s=n.imageSizes,p=n.state,b=n.imageAlignment,m=n.fontSize,d=n.appearance,f=n.titleTag,h=u.width,g=u.height,y=u.size,O=p.imgHeight,v=p.imgWidth,E=p.imgReady,C=d.borderWidth,k=d.borderColor,x=d.backgroundColor,D=d.backgroundOpacity;if(E)if(null!=h&&null!=g)t=h,e=g;else{var w=s[y].width/Math.max(O,v);t=Math.round(v*w),e=Math.round(v*w)}var I=[];if(Object.keys(c).length===Object.keys(o).length)for(var _ in o)o[_]&&I.push(Object(j.createElement)("li",{key:_,style:{fontSize:m+"em"}},Object(j.createElement)("span",{className:"field-name"},c[_].name,": "),Object(j.createElement)("span",{className:"field-data"},c[_].content)));var A=f,T=[Object(j.createElement)(j.Fragment,null,E&&Object(j.createElement)("img",{className:"img-info-"+b,src:l,height:e,width:t}),null===a||Object(j.createElement)(A,null,a),null===r||Object(j.createElement)("p",{style:{fontSize:m+"em"}},r," "))],P=S(x.toString(16)),R={borderWidth:C,borderColor:k,backgroundColor:"rgba( ".concat(P.r,", ").concat(P.g,", ").concat(P.b,", ").concat(D," )")};return null!==i?[Object(j.createElement)("div",{className:"info-outer-div",style:R},T,0===I.length||Object(j.createElement)("ul",null,I))]:[Object(j.createElement)("div",null)]}}]),t}(j.Component),I=function(e){function t(){return c()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.objectID,n=e.onChangeObjectID,i=e.onUpdateButton;return[Object(j.createElement)("div",null,Object(j.createElement)("p",null,"Enter the Wordpress ID of the object you wish to display."),Object(j.createElement)(v.TextControl,{label:"Object ID",onChange:n,value:t}),Object(j.createElement)(v.Button,{isDefault:!0,isPrimary:!0,onClick:i},"Update"),Object(j.createElement)(D,null,"Search"))]}}]),t}(j.Component),_={thumbnail:{height:150,width:150},medium:{height:300,width:300},large:{height:1024,width:1024},full:{height:null,width:null}},A=function(e){function t(e){var n;return c()(this,t),(n=b()(this,d()(t).call(this,e))).setAppearance=n.setAppearance.bind(h()(n)),n.render=n.render.bind(h()(n)),n}return y()(t,e),s()(t,[{key:"setAppearance",value:function(e,t){var n,i=this.props,a=i.appearance,r=i.setAttributes;n=t||0;var l=Object.assign({},a);"borderColor"!==e&&"backgroundColor"!==e||(n=n.hex),l[e]=n,r({appearance:l})}},{key:"render",value:function(){var e=this,t=this.props,n=t.appearance,i=(t.setAttributes,n.borderWidth),a=n.borderColor,r=n.backgroundColor,l=n.backgroundOpacity;return[Object(j.createElement)(v.PanelBody,{title:"Appearance",initialOpen:!1},Object(j.createElement)(v.PanelRow,null,Object(j.createElement)(v.RangeControl,{label:"Border Width",allowReset:!0,initialPosition:"0",onChange:function(t){return e.setAppearance("borderWidth",t)},min:"0",max:"5",step:"0.5",value:i})),Object(j.createElement)(v.PanelRow,null,Object(j.createElement)("p",null,"Border Color"),Object(j.createElement)(v.ColorPicker,{color:a,onChangeComplete:function(t){return e.setAppearance("borderColor",t)},disableAlpha:!0})),Object(j.createElement)(v.PanelRow,null,Object(j.createElement)("p",null,"Background Color"),Object(j.createElement)(v.ColorPicker,{color:r,onChangeComplete:function(t){return e.setAppearance("backgroundColor",t)},disableAlpha:!0})),Object(j.createElement)(v.PanelRow,null,Object(j.createElement)(v.RangeControl,{label:"Background Opacity",allowReset:!0,initialPosition:"0",onChange:function(t){return e.setAppearance("backgroundOpacity",t)},min:"0",max:"1",step:"0.01",value:l})))]}}]),t}(j.Component),T=function(e){function t(){return c()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),s()(t,[{key:"updateField",value:function(e,t){var n=this.props,i=n.setAttributes,a=n.toggle,r=n.fields;r[e]=t,i({fields:r,toggle:!a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fieldData,i=t.fields;if(Object.keys(i).length>0&&Object.keys(n).length===Object.keys(i).length){var a=[],r=function(t){a.push(Object(j.createElement)(v.CheckboxControl,{key:t.toString(),label:n[t].name,checked:i[t],onChange:function(n){e.updateField(t,n)}}))};for(var l in i)r(l);return[Object(j.createElement)(v.PanelBody,{title:"Custom Fields",initialOpen:!1},a)]}return null}}]),t}(j.Component),P=function(e){function t(){return c()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,i=t.displayTitle,a=t.displayExcerpt,r=t.displayThumbnail,l=t.linkToObject;return[Object(j.createElement)(v.PanelBody,{title:"Options",initialOpen:!0},Object(j.createElement)(v.CheckboxControl,{label:"Display Title",checked:i,onChange:function(e){n({displayTitle:e})}}),Object(j.createElement)(v.CheckboxControl,{label:"Display Excerpt",checked:a,onChange:function(e){n({displayExcerpt:e})}}),Object(j.createElement)(v.CheckboxControl,{label:"Display Thumbnail",checked:r,onChange:function(e){n({displayThumbnail:e})}}),Object(j.createElement)(v.CheckboxControl,{label:"Link to Object",checked:l,onChange:function(e){n({linkToObject:e})}}))]}}]),t}(j.Component),R=function(e){function t(e){var n;return c()(this,t),(n=b()(this,d()(t).call(this,e))).updateImage=n.updateImage.bind(h()(n)),n.updateHeight=n.updateHeight.bind(h()(n)),n.updateWidth=n.updateWidth.bind(h()(n)),n.updateImageAlignment=n.updateImageAlignment.bind(h()(n)),n}return y()(t,e),s()(t,[{key:"updateImage",value:function(e){var t=this.props,n=t.setAttributes,i=t.state,a=i.imgHeight,r=i.imgWidth;if(i.imgReady){var l,o=_[e].width;l=null===o?1:o/Math.max(r,a),n({imageDimensions:{height:Math.round(l*a),width:Math.round(l*r),size:e}})}}},{key:"updateHeight",value:function(e){var t=this.props,n=t.setAttributes,i=t.state,a=i.imgHeight,r=i.imgWidth;if(i.imgReady){var l=Math.min(e,a);n({imageDimensions:{height:l,width:Math.round(l/a*r),size:null}})}}},{key:"updateWidth",value:function(e){var t=this.props,n=t.setAttributes,i=t.state,a=i.imgHeight,r=i.imgWidth;if(i.imgReady){var l=Math.min(e,r);n({imageDimensions:{height:Math.round(l/r*a),width:l,size:null}})}}},{key:"updateImageAlignment",value:function(e){(0,this.props.setAttributes)({imageAlignment:e})}},{key:"render",value:function(){var e=this,t=this.props.attributes,n=t.imageDimensions,i=t.imageAlignment,r=n.width,l=n.height,o=n.size,c=[{value:"thumbnail",label:Object(a.__)("Thumbnail")},{value:"medium",label:Object(a.__)("Medium")},{value:"large",label:Object(a.__)("Large")},{value:"full",label:Object(a.__)("Full Size")}];return[Object(j.createElement)(v.PanelBody,{title:Object(a.__)("Image Settings"),initialOpen:!0},Object(j.createElement)(v.SelectControl,{label:Object(a.__)("Image Size"),value:o,options:c,onChange:this.updateImage}),Object(j.createElement)("div",null,Object(j.createElement)("p",null,Object(a.__)("Image Dimensions")),Object(j.createElement)(v.TextControl,{type:"number",label:Object(a.__)("Width"),value:r||"",min:1,onChange:this.updateWidth}),Object(j.createElement)(v.TextControl,{type:"number",label:Object(a.__)("Height"),value:l||"",min:1,onChange:this.updateHeight})),Object(j.createElement)("div",null,Object(j.createElement)("p",null,Object(a.__)("Image Alignment")),Object(j.createElement)(v.ButtonGroup,null,Object(j.createElement)(v.Button,{isPrimary:"left"===i,onClick:function(){e.updateImageAlignment("left")}},Object(j.createElement)(v.Dashicon,{icon:"align-left"})),Object(j.createElement)(v.Button,{isPrimary:"center"===i,onClick:function(){e.updateImageAlignment("center")}},Object(j.createElement)(v.Dashicon,{icon:"align-center"})),Object(j.createElement)(v.Button,{isPrimary:"right"===i,onClick:function(){e.updateImageAlignment("right")}},Object(j.createElement)(v.Dashicon,{icon:"align-right"})))))]}}]),t}(j.Component),B=function(e){function t(){return c()(this,t),b()(this,d()(t).apply(this,arguments))}return y()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.setAttributes,n=e.titleTag,i=e.fontSize;return[Object(j.createElement)(v.PanelBody,{title:"Font Size",initialOpen:!1},Object(j.createElement)(v.PanelRow,null,Object(j.createElement)(v.SelectControl,{label:"Title Style",value:n,options:[{label:"Heading 2",value:"h2"},{label:"Heading 3",value:"h3"},{label:"Heading 4",value:"h4"},{label:"Heading 5",value:"h5"},{label:"Heading 6",value:"h6"},{label:"Paragraph",value:"p"}],onChange:function(e){return t({titleTag:e})}})),Object(j.createElement)(v.PanelRow,null,Object(j.createElement)(v.RangeControl,{label:"Text (em)",onChange:function(e){return t(e?{fontSize:e}:{fontSize:1})},min:"0.25",max:"2",step:"0.05",value:i,initialPosition:"1",withInputField:!0,allowReset:!0})))]}}]),t}(j.Component);function z(e){var t=e.attributes,n=e.state,i=e.onChangeObjectID,a=e.onUpdateButton,r=e.imageSizes,l=t.objectID,o=t.title,c=t.excerpt,u=t.thumbnailURL,s=t.objectURL,p=t.fields,b=t.fieldData,m=t.imageDimensions,d=t.imageAlignment,f=t.fontSize,h=t.displayTitle,g=t.displayThumbnail,y=t.displayExcerpt,O=t.linkToObject,v=t.appearance,E=t.titleTag;return n.object_fetched?[Object(j.createElement)(w,{objectID:l,title:h?o:null,excerpt:y?c:null,thumbnailURL:g?u:null,objectURL:O?s:null,fields:p,fieldData:b,imageDimensions:m,imageSizes:r,state:n,imageAlignment:d,fontSize:f,appearance:v,titleTag:E})]:[Object(j.createElement)(I,{objectID:l,onChangeObjectID:i,onUpdateButton:a})]}var U=function(e){function t(e){var n;return c()(this,t),(n=b()(this,d()(t).call(this,e))).onUpdateButton=n.onUpdateButton.bind(h()(n)),n.onChangeObjectID=n.onChangeObjectID.bind(h()(n)),n.fetchFieldData=n.fetchFieldData.bind(h()(n)),n.state={object_fetched:!1,object_data:{},imgHeight:null,imgWidth:null,imgReady:!1},n}return y()(t,e),s()(t,[{key:"getImageDimensions",value:function(){var e,t=this.props.attributes.thumbnailURL,n=this;(e=t,new Promise((function(t,n){var i=new Image;i.addEventListener("load",(function(){return t(i)})),i.addEventListener("error",(function(e){return n(e)})),i.src=e}))).then((function(e){n.setState({imgHeight:e.height,imgWidth:e.width,imgReady:!0})}))}},{key:"fetchFieldData",value:function(){var e=this.props.setAttributes,t=this.props.attributes.objectID;if(null!=t){var n="/wp-museum/v1/all/"+t,i=this;C()({path:n}).then((function(t){i.setState({object_data:t}),e({title:t.post_title,excerpt:t.excerpt,thumbnailURL:t.thumbnail[0],objectURL:t.link}),null!=i.props.attributes.thumbnailURL&&(i.setState({imgReady:!1}),i.getImageDimensions()),C()({path:"/wp-museum/v1/"+t.post_type+"/custom"}).then((function(t){var n=i.props.attributes.fields,a=i.state.object_data,r={},l={};for(var o in t){void 0===n[o]?r[o]=!1:r[o]=n[o];var c="";c="tinyint"===t[o].type?1===a[t[o].slug]?"Yes":"No":a[t[o].slug],l[o]={name:t[o].name,content:c}}e({fields:r,fieldData:l}),i.setState({object_fetched:!0})}))}))}}},{key:"componentDidMount",value:function(){this.fetchFieldData()}},{key:"onChangeObjectID",value:function(e){(0,this.props.setAttributes)({objectID:e})}},{key:"onUpdateButton",value:function(){this.fetchFieldData()}},{key:"render",value:function(){var e=this.props,t=e.setAttributes,n=e.attributes,i=n.fontSize,a=n.appearance,r=n.titleTag;return[Object(j.createElement)(j.Fragment,null,Object(j.createElement)(O.InspectorControls,null,Object(j.createElement)(v.PanelBody,{title:"Embed Object",initialOpen:!0},Object(j.createElement)(v.PanelRow,null,Object(j.createElement)(v.TextControl,{label:"Object ID",onChange:this.onChangeObjectID,value:this.objectID})),Object(j.createElement)(v.PanelRow,null,Object(j.createElement)(v.Button,{isDefault:!0,isPrimary:!0,onClick:this.onUpdateButton},"Update"),Object(j.createElement)(D,null,"Search"))),Object(j.createElement)(P,this.props),Object(j.createElement)(R,l()({},this.props,{state:this.state})),Object(j.createElement)(A,{setAttributes:t,appearance:a}),Object(j.createElement)(B,{setAttributes:t,titleTag:r,fontSize:i}),Object(j.createElement)(T,{setAttributes:this.props.setAttributes,fields:this.props.attributes.fields,fieldData:this.props.attributes.fieldData,toggle:this.props.attributes.toggle})),Object(j.createElement)(z,l()({},this.props,{onUpdateButton:this.onUpdateButton,onChangeObjectID:this.onChangeObjectID,state:this.state,imageSizes:_})))]}}]),t}(j.Component);Object(i.registerBlockType)("wp-museum/object-info-box",{title:Object(a.__)("Museum Object Infobox"),icon:"archive",category:"widgets",supports:{align:["left","right","center"]},attributes:{align:{type:"string",default:"left"},objectID:{type:"string",default:null},title:{type:"string",default:null},excerpt:{type:"string",default:null},thumbnailURL:{type:"string",default:null},objectURL:{type:"string",default:null},displayTitle:{type:"boolean",default:!0},displayExcerpt:{type:"boolean",default:!0},displayThumbnail:{type:"boolean",default:!0},linkToObject:{type:"boolean",default:!0},fields:{type:"object",default:{}},fieldData:{type:"object",default:{}},toggle:{type:"boolean",default:!1},imageDimensions:{type:"object",default:{width:null,height:null,size:"large"}},imageAlignment:{type:"string",default:"center"},fontSize:{type:"float",default:.7},titleTag:{type:"string",default:"h6"},appearance:{type:"object",default:{borderWidth:1,borderColor:"#000",backgroundColor:"#fff",backgroundOpacity:0}}},edit:U,save:function(e){var t=e.attributes,n=t.title,i=t.excerpt,a=t.thumbnailURL,r=t.objectURL,l=t.displayTitle,o=t.displayExcerpt,c=t.displayThumbnail,u=t.linkToObject,s=t.fields,p=t.fieldData,b=t.imageDimensions,m=t.imageAlignment,d=t.fontSize,f=t.titleTag,h=t.appearance,g=b.width,y=b.height,O=h.borderWidth,v=h.borderColor,E=h.backgroundColor,C=h.backgroundOpacity,k=f,x=S(E.toString(16)),D={borderWidth:O,borderColor:v,backgroundColor:"rgba( ".concat(x.r,", ").concat(x.g,", ").concat(x.b,", ").concat(C," )")},w=[];if(Object.keys(p).length===Object.keys(s).length)for(var I in s)s[I]&&w.push(Object(j.createElement)("li",{key:I,style:{fontSize:d+"em"}},Object(j.createElement)("span",{className:"field-name"},p[I].name,": "),Object(j.createElement)("span",{className:"field-data"},p[I].content)));var _=Object(j.createElement)(j.Fragment,null,null!=a&&c&&Object(j.createElement)("img",{className:"img-info-"+m,src:a,height:y,width:g}),null!=n&&l&&Object(j.createElement)(k,null,n),null!=i&&o&&Object(j.createElement)("p",{style:{fontSize:d+"em"}},i," ")),A=u&&null!=r?Object(j.createElement)("a",{className:"object-link",href:r},_):_;return Object(j.createElement)("div",{className:"info-outer-div",style:D},A,w.length>0&&Object(j.createElement)("ul",null,w))}})}]);